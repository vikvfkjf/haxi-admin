(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5942b348"],{"25d6":function(e,t,l){"use strict";l("2dd1")},"2dd1":function(e,t,l){},"62bf":function(e,t,l){"use strict";l.d(t,"b",(function(){return o})),l.d(t,"a",(function(){return i})),l.d(t,"c",(function(){return n})),l.d(t,"d",(function(){return r}));var a=l("b775");function o(e){return Object(a["a"])({url:"/v1/admin/review/phone-apply-list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/v1/admin/review/review-phone-apply",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/v1/admin/company/phone-list",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/v1/admin/company/admin-phone-list",method:"get",params:e})}},"877c":function(e,t,l){"use strict";l("b41d")},b41d:function(e,t,l){},f5ee:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"number-self-container"},[l("div",{staticClass:"title"},[l("h2",[e._v("自有小号列表")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.bindSelf}},[e._v("新增")])],1),l("div",{staticClass:"tables"},[l("div",{staticClass:"forms"},[l("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:"",size:"mini"}},[l("el-form-item",{attrs:{label:"小号"}},[l("el-input",{attrs:{placeholder:"请输入小号"},model:{value:e.form.x_phone,callback:function(t){e.$set(e.form,"x_phone",t)},expression:"form.x_phone"}})],1),l("el-form-item",{attrs:{label:"创建时间"}},[l("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),l("el-form-item",{attrs:{label:""}},[l("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#ececec"},height:"calc(100% - 119px)",size:"mini"}},[l("el-table-column",{attrs:{prop:"id",label:"id",width:"80"}}),l("el-table-column",{attrs:{prop:"city_name",label:"地区",width:"200"}}),l("el-table-column",{attrs:{prop:"code",label:"地区编号",width:"200"}}),l("el-table-column",{attrs:{prop:"phone_mode_name",label:"小号模式",width:"200"}}),l("el-table-column",{attrs:{prop:"x_phone",label:"小号",width:"200"}}),l("el-table-column",{attrs:{prop:"effect_time",label:"生效时间",width:"150"}}),l("el-table-column",{attrs:{prop:"expire_time",label:"失效时间",width:"150"}}),l("el-table-column",{attrs:{prop:"validate_bind_record",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.validate_bind_record?l("span",[e._v("绑定中")]):l("span",[e._v("空闲")])]}}])})],1),l("el-pagination",{attrs:{background:"","current-page":e.pages.current_page,"page-sizes":[10,20,50,100],"page-size":e.pages.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pages.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),l("bind-self-dialog",{ref:"bindSelfDialog",on:{success:e.success}})],1)},o=[],i=(l("2f62"),l("62bf")),n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"bind-dialog"},[l("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"绑定自有小号",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("div",{staticClass:"content"},[l("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[l("el-form-item",{attrs:{label:"号码池key",prop:"pool_key"}},[l("el-input",{model:{value:e.form.pool_key,callback:function(t){e.$set(e.form,"pool_key",t)},expression:"form.pool_key"}})],1),l("el-form-item",{attrs:{label:"小号模式",prop:"phone_mode_key"}},[l("el-select",{attrs:{placeholder:"请选择小号模式"},model:{value:e.form.phone_mode_key,callback:function(t){e.$set(e.form,"phone_mode_key",t)},expression:"form.phone_mode_key"}},e._l(e.phone_mode,(function(e,t){return l("el-option",{key:t,attrs:{label:e.name,value:e.key}})})),1)],1),l("el-form-item",{attrs:{label:"生效时间",prop:"effect_time"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.effect_time,callback:function(t){e.$set(e.form,"effect_time",t)},expression:"form.effect_time"}})],1),l("el-form-item",{attrs:{label:"租用时长",prop:"valid_time"}},[l("el-select",{attrs:{placeholder:"请选择租用时长"},model:{value:e.form.valid_time,callback:function(t){e.$set(e.form,"valid_time",t)},expression:"form.valid_time"}},e._l(e.howTime,(function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"文件"}},[l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"company_phone_file",action:e.action,headers:e.headers,"on-remove":e.handleRemove,"on-change":e.handleChange,"on-success":e.handleSuccess,"file-list":e.fileList,limit:1,data:e.form,"auto-upload":!1}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确定")])],1)])],1)},r=[],s=l("b775");function c(){return Object(s["a"])({url:"/v1/open/before",method:"get"})}var d=l("5f87"),u={name:"bind-dialog",data:function(){return{action:"http://39.108.180.149:7788/api/v1/admin/company/import-admin-phone",headers:{Authorization:Object(d["a"])()},dialogVisible:!1,loading:!1,val:{},phone_mode:[],form:{valid_time:null,pool_key:null,effect_time:null,phone_mode_key:null},rules:{phone_mode_key:[{required:!0,message:"请输入小号模式",trigger:"blur"}],valid_time:[{required:!0,message:"请输入月份",trigger:"blur"}],company_phone_file:[{required:!0,message:"请选择文件",trigger:"blur"}],pool_key:[{required:!0,message:"请输入号码池key",trigger:"blur"}]},fileList:[],howTime:[{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"6个月",value:6},{label:"12个月",value:12},{label:"24个月",value:24}]}},mounted:function(){this.before()},methods:{before:function(){var e=this;c().then((function(t){e.phone_mode=t.data.phone_mode}))},show:function(e){this.val=e,this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.loading=!0,e.$refs.upload.submit())}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={valid_time:null,pool_key:null,effect_time:null,phone_mode_key:null},this.$refs.form.clearValidate()},handleRemove:function(e,t){this.form.company_phone_file=null},handlePreview:function(e){console.log(e)},handleChange:function(e,t){},handleSuccess:function(e,t,l){this.loading=!1,200==e.status_code?(this.$notify({title:"提示",type:"success",message:"批量绑定成功"}),this.handleClose(),this.$emit("success")):this.$notify({title:"提示",type:"error",message:"绑定失败"})}}},m=u,p=(l("25d6"),l("2877")),f=Object(p["a"])(m,n,r,!1,null,"2832a4e6",null),h=f.exports,g={name:"number-self",components:{bindSelfDialog:h},data:function(){return{loading:!1,form:{x_phone:null,time:null},list:[],pages:{current_page:1,per_page:10,total:null}}},mounted:function(){this.getSelfPhoneList()},methods:{handleSizeChange:function(e){this.pages.per_page=e,this.getSelfPhoneList()},handleCurrentChange:function(e){this.pages.current_page=e,this.getSelfPhoneList()},getSelfPhoneList:function(){var e=this;this.loading=!0;var t={"equal[x_phone]":this.form.x_phone?this.form.x_phone:null,"great_equal[created_at]":this.form.time?this.form.time[0]+" 00:00:00":null,"less_equal[created_at]":this.form.time?this.form.time[1]+" 23:59:59":null,page:this.pages.current_page,per_page:this.pages.per_page};Object(i["d"])(t).then((function(t){e.loading=!1,200==t.status_code&&(e.list=t.data.data,e.pages.total=t.data.total)}))},search:function(){console.log(this.form),this.pages.current_page=1,this.getSelfPhoneList()},success:function(){this.getSelfPhoneList()},bindSelf:function(){this.$refs.bindSelfDialog.show()}}},b=g,_=(l("877c"),Object(p["a"])(b,a,o,!1,null,"28d95aa6",null));t["default"]=_.exports}}]);