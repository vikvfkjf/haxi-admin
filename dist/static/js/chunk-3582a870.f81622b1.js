(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3582a870"],{1579:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-index-container"},[e._m(0),a("div",{staticClass:"tables"},[a("div",{staticClass:"forms"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:"",size:"mini"}},[a("el-form-item",{attrs:{label:"公司编号"}},[a("el-input",{attrs:{placeholder:"请输入公司编号"},model:{value:e.form.company_no,callback:function(t){e.$set(e.form,"company_no",t)},expression:"form.company_no"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#ececec"},height:"calc(100% - 119px)",size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80"}}),a("el-table-column",{attrs:{prop:"company_no",label:"公司编号",width:"200"}}),a("el-table-column",{attrs:{prop:"company_name",label:"公司名称",width:"200"}}),a("el-table-column",{attrs:{prop:"phone_mode_name",label:"小号模式",width:"200"}}),a("el-table-column",{attrs:{prop:"scene_desc",label:"描述文字",width:"200"}}),a("el-table-column",{attrs:{prop:"action",label:"生效时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.action?a("span",[e._v("立即生效")]):e._e(),2==t.row.action?a("span",[e._v("次月生效")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"apply_status",label:"审核",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.apply_status?a("span",[e._v("待审核")]):e._e(),2==t.row.apply_status?a("span",[e._v("通过")]):e._e(),3==t.row.apply_status?a("span",[e._v("拒绝")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200"}}),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.bind(t.row)}}},[e._v("绑定")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.examine(t.row)}}},[e._v("审核")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.detail(t.row)}}},[e._v("申请小号")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.look(t.row)}}},[e._v("通过小号")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.pages.current_page,"page-sizes":[10,20,50,100],"page-size":e.pages.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pages.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("examine-dialog",{ref:"examineDialog",on:{success:e.success}}),a("number-dialog",{ref:"numberDialog"}),a("bind-dialog",{ref:"bindDialog"})],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("h2",[e._v("小号申请列表")])])}],o=(a("2f62"),a("62bf")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"examine-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"审核",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"id",prop:"id"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),a("el-form-item",{attrs:{label:"审核状态",prop:"apply_status"}},[a("el-select",{model:{value:e.form.apply_status,callback:function(t){e.$set(e.form,"apply_status",t)},expression:"form.apply_status"}},[a("el-option",{attrs:{label:"待审核",value:1}}),a("el-option",{attrs:{label:"通过",value:2}}),a("el-option",{attrs:{label:"拒绝",value:3}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确定")])],1)])],1)},s=[],r={name:"examine-dialog",data:function(){return{dialogVisible:!1,loading:!1,val:{},form:{id:null,apply_status:null,remark:null},rules:{remark:[{required:!0,message:"请输入备注",trigger:"blur"}],apply_status:[{required:!0,message:"请选择审核状态",trigger:"blur"}]}}},mounted:function(){},methods:{show:function(e){this.val=e,this.form.id=e.id,this.form.apply_status=e.apply_status,this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=e.form;Object(o["a"])(a).then((function(t){if(e.loading=!1,200!=t.status_code)return e.$notify({title:"提示",message:"审核失败",type:"error"}),!1;e.$notify({title:"提示",message:"修改成功",type:"success"}),e.handleClose(),e.$emit("success")})).catch((function(t){e.loading=!1}))}}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={id:null,apply_status:null,remark:null},this.$refs.form.clearValidate()}}},c=r,u=(a("dee8"),a("2877")),m=Object(u["a"])(c,n,s,!1,null,"c3fc6d56",null),p=m.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"小号",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#ececec"},size:"mini"}},[a("el-table-column",{attrs:{prop:"code",label:"城市编号",width:"200"}}),a("el-table-column",{attrs:{prop:"city",label:"城市",width:"200"}}),a("el-table-column",{attrs:{prop:"num",label:"数量"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")])],1)])],1)},f=[],h={name:"number-dialog",data:function(){return{dialogVisible:!1,loading:!1,list:[]}},mounted:function(){},methods:{show:function(e){this.list=e.apply_content,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1}}},g=h,b=(a("b150"),Object(u["a"])(g,d,f,!1,null,"f134452e",null)),_=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bind-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"绑定小号",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"公司编号",prop:"company_no"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.company_no,callback:function(t){e.$set(e.form,"company_no",t)},expression:"form.company_no"}})],1),a("el-form-item",{attrs:{label:"应用编号",prop:"app_no"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.app_no,callback:function(t){e.$set(e.form,"app_no",t)},expression:"form.app_no"}})],1),a("el-form-item",{attrs:{label:"号码池key",prop:"pool_key"}},[a("el-input",{model:{value:e.form.pool_key,callback:function(t){e.$set(e.form,"pool_key",t)},expression:"form.pool_key"}})],1),a("el-form-item",{attrs:{label:"生效时间",prop:"effect_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.effect_time,callback:function(t){e.$set(e.form,"effect_time",t)},expression:"form.effect_time"}})],1),a("el-form-item",{attrs:{label:"有效时间",prop:"valid_time"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.valid_time,callback:function(t){e.$set(e.form,"valid_time",t)},expression:"form.valid_time"}},[a("template",{slot:"append"},[e._v("月")])],2)],1),a("el-form-item",{attrs:{label:"文件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"company_phone_file",action:e.action,headers:e.headers,"on-remove":e.handleRemove,"on-change":e.handleChange,"on-success":e.handleSuccess,"file-list":e.fileList,limit:1,data:e.form,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确定")])],1)])],1)},v=[],k=a("5f87"),w={name:"bind-dialog",data:function(){return{action:"http://39.108.180.149:7788/api/v1/admin/company/import-phone",headers:{Authorization:Object(k["a"])()},dialogVisible:!1,loading:!1,val:{},form:{company_no:null,app_no:null,valid_time:null,pool_key:null,effect_time:null,expire_time:null,phone_mode_key:null},rules:{company_no:[{required:!0,message:"请输入公司编号",trigger:"blur"}],app_no:[{required:!0,message:"请输入应用编号",trigger:"blur"}],valid_time:[{required:!0,message:"请输入月份",trigger:"blur"}],company_phone_file:[{required:!0,message:"请选择文件",trigger:"blur"}],pool_key:[{required:!0,message:"请输入号码池key",trigger:"blur"}],expire_time:[{required:!0,message:"请选择过期时间",trigger:"blur"}]},fileList:[]}},mounted:function(){},methods:{show:function(e){this.val=e,this.form.company_no=e.company_no,this.form.app_no=e.app_no,this.form.phone_mode_key=e.phone_mode_key,this.form.valid_time=e.valid_time,this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.loading=!0,e.$refs.upload.submit())}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={company_no:null,app_no:null,company_phone_file:null,valid_time:null,pool_key:null,effect_time:null,expire_time:null,phone_mode_key:null},this.$refs.form.clearValidate()},handleRemove:function(e,t){this.form.company_phone_file=null},handlePreview:function(e){console.log(e)},handleChange:function(e,t){},handleSuccess:function(e,t,a){this.loading=!1,200==e.status_code?(this.$notify({title:"提示",type:"success",message:"批量绑定成功"}),this.dialogVisible=!1,this.$emit("success")):3e3==e.status_code?this.$notify({title:"提示",type:"error",message:"余额不足，请为提示客户充值，并为客户赋值"}):this.$notify({title:"提示",type:"error",message:"绑定失败"})}}},x=w,$=(a("4305"),Object(u["a"])(x,y,v,!1,null,"684361b8",null)),C=$.exports,z={name:"Number-index",components:{examineDialog:p,numberDialog:_,bindDialog:C},data:function(){return{loading:!1,form:{company_no:null,time:null},list:[],pages:{current_page:1,per_page:10,total:null}}},mounted:function(){this.form.company_no=this.$route.query.company_no?this.$route.query.company_no:null,this.getPhoneApplyList()},methods:{handleSizeChange:function(e){this.pages.per_page=e,this.getPhoneApplyList()},handleCurrentChange:function(e){this.pages.current_page=e,this.getPhoneApplyList()},getPhoneApplyList:function(){var e=this;this.loading=!0;var t={"equal[company_no]":this.form.company_no?this.form.company_no:null,"great_equal[created_at]":this.form.time?this.form.time[0]+" 00:00:00":null,"less_equal[created_at]":this.form.time?this.form.time[1]+" 23:59:59":null,page:this.pages.current_page,per_page:this.pages.per_page};Object(o["b"])(t).then((function(t){e.loading=!1,200==t.status_code&&(e.list=t.data.data,e.pages.total=t.data.total)}))},search:function(){console.log(this.form),this.pages.current_page=1,this.getPhoneApplyList()},examine:function(e){this.$refs.examineDialog.show(e)},success:function(){this.getPhoneApplyList()},detail:function(e){this.$refs.numberDialog.show(e)},bind:function(e){this.$refs.bindDialog.show(e)},look:function(e){this.$router.push({path:"/number/list",query:{company_no:e.company_no}})}}},V=z,q=(a("597fb"),Object(u["a"])(V,i,l,!1,null,"624c90b2",null));t["default"]=q.exports},"333c":function(e,t,a){},4305:function(e,t,a){"use strict";a("65b6")},"4b11":function(e,t,a){},"597fb":function(e,t,a){"use strict";a("92f4")},"62bf":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return s}));var i=a("b775");function l(e){return Object(i["a"])({url:"/v1/admin/review/phone-apply-list",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/v1/admin/review/review-phone-apply",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/v1/admin/company/phone-list",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/v1/admin/company/admin-phone-list",method:"get",params:e})}},"65b6":function(e,t,a){},"92f4":function(e,t,a){},b150:function(e,t,a){"use strict";a("333c")},dee8:function(e,t,a){"use strict";a("4b11")}}]);