(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fd99169"],{"23fa":function(e,t,a){"use strict";a("cb05")},3820:function(e,t,a){},"4b15":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a("b775");function l(e){return Object(s["a"])({url:"/v1/admin/channel/list",method:"get",params:e})}},"51ab":function(e,t,a){},"666a":function(e,t,a){},"7c46":function(e,t,a){"use strict";a("3820")},"7ced":function(e,t,a){"use strict";a("f7c0")},8681:function(e,t,a){"use strict";a("51ab")},cb05:function(e,t,a){},cd05:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r}));var s=a("b775");function l(e){return Object(s["a"])({url:"/v1/admin/recharge/list",method:"get",params:e})}function n(e){return Object(s["a"])({url:"/v1/admin/recharge",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/v1/admin/consume/list",method:"get",params:e})}},e382:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-index-container"},[a("div",{staticClass:"title"},[a("h2",[e._v("用户列表")]),a("el-button",{attrs:{size:"mini"},on:{click:e.addUser}},[e._v("添加用户")])],1),a("div",{staticClass:"tables"},[a("div",{staticClass:"opts"},[a("el-button",{attrs:{type:"text",icon:"el-icon-coin",disabled:e.disabled},on:{click:e.consumeList}},[e._v("消费记录")]),a("el-button",{attrs:{type:"text",icon:"el-icon-coin",disabled:e.disabled},on:{click:e.rechargeList}},[e._v("充值记录")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#ececec"},height:"calc(100% - 112px)",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),a("el-table-column",{attrs:{prop:"user_no",label:"用户编号",width:"180"}}),a("el-table-column",{attrs:{prop:"channel_key",label:"通道编号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名称",width:"150"}}),a("el-table-column",{attrs:{prop:"level",label:"用户等级",width:"100"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",width:"150"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"150"}}),a("el-table-column",{attrs:{prop:"total_remain_sms",label:"短信余额",width:"150"}}),a("el-table-column",{attrs:{prop:"task_rebate",label:"扣减占比",width:"100"}}),a("el-table-column",{attrs:{prop:"status",label:"企业认证状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v("启用")]):e._e(),2==t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("禁用")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.changePassword(t.row)}}},[e._v("修改密码")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.changeUser(t.row)}}},[e._v("修改用户信息")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.recharge(t.row)}}},[e._v("充值")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pages.page,"page-sizes":[10,20,50,100],"page-size":e.pages.per_page,layout:"total, sizes, prev, pager, next, jumper",background:"",total:e.pages.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("password-dialog",{ref:"passwordDialog",on:{success:e.success}}),a("info-dialog",{ref:"infoDialog",on:{success:e.success}}),a("add-user-dialog",{ref:"addUserDialog",on:{success:e.success}}),a("recharge-dialog",{ref:"rechargeDialog",on:{success:e.success}})],1)},l=[],n=(a("2f62"),a("c24f")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"password-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"修改密码",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户编号",prop:"user_no"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.user_no,callback:function(t){e.$set(e.form,"user_no",t)},expression:"form.user_no"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)},o=[],i={name:"password-dialog",data:function(){return{dialogVisible:!1,loading:!1,val:{},form:{user_no:null,password:null},rules:{user_no:[{required:!0,message:"请输入用户编号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted:function(){},methods:{show:function(e){this.val=e,this.form.user_no=e.user_no,this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=e.form;Object(n["b"])(a).then((function(t){if(e.loading=!1,200!=t.status_code)return e.$notify({title:"提示",message:"修改密码失败",type:"error"}),!1;e.$notify({title:"提示",message:"修改密码成功",type:"success"}),e.handleClose(),e.$emit("success")}))}}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={user_no:null,password:null},this.$refs.form.clearValidate()}}},u=i,c=(a("7ced"),a("2877")),m=Object(c["a"])(u,r,o,!1,null,"495082f6",null),d=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"price-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"修改用户",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"公司名称",prop:"user_no"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.user_no,callback:function(t){e.$set(e.form,"user_no",t)},expression:"form.user_no"}})],1),a("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"禁用",value:2}})],1)],1),a("el-form-item",{attrs:{label:"等级",prop:"level"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.company_name,callback:function(t){e.$set(e.form,"company_name",t)},expression:"form.company_name"}})],1),a("el-form-item",{attrs:{label:"剩余可用短信",prop:"total_remain_sms"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.total_remain_sms,callback:function(t){e.$set(e.form,"total_remain_sms",t)},expression:"form.total_remain_sms"}})],1),a("el-form-item",{attrs:{label:"通道key",prop:"channel_key"}},[a("el-select",{model:{value:e.form.channel_key,callback:function(t){e.$set(e.form,"channel_key",t)},expression:"form.channel_key"}},e._l(e.passList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_key}})})),1)],1),a("el-form-item",{attrs:{label:"扣减因子",prop:"task_rebate"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.task_rebate,callback:function(t){e.$set(e.form,"task_rebate",t)},expression:"form.task_rebate"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)},p=[],g=(a("b0c0"),a("4b15")),h={name:"Price-dialog",data:function(){return{dialogVisible:!1,loading:!1,val:{},passList:[],form:{user_no:null,name:null,level:null,status:null,email:null,company_name:null,total_remain_sms:null,channel_key:null,task_rebate:null},rules:{user_no:[{required:!0,message:"请输入公司名称",trigger:"blur"}],name:[{required:!0,message:"请输入公司编号",trigger:"blur"}],level:[{required:!0,message:"请输入每个小号月租费",trigger:"blur"}],status:[{required:!0,message:"请选择计费模式",trigger:"blur"}],email:[{required:!0,message:"请输入每分钟通话费",trigger:"blur"}],company_name:[{required:!0,message:"请输入每分钟录音费",trigger:"blur"}],total_remain_sms:[{required:!0,message:"请输入每通通话费",trigger:"blur"}],channel_key:[{required:!0,message:"请输入每通录音费",trigger:"blur"}],task_rebate:[{required:!0,message:"请输入扣减因子",trigger:"blur"}]}}},mounted:function(){this.channelList()},methods:{show:function(e){this.val=e,this.form={user_no:e.user_no,name:e.name,level:e.level,status:e.status,email:e.email,company_name:e.company_name,total_remain_sms:e.total_remain_sms,channel_key:e.channel_key,task_rebate:e.task_rebate},this.dialogVisible=!0},channelList:function(){var e=this,t={page:1,per_page:100};Object(g["a"])(t).then((function(t){200==t.status_code&&(e.passList=t.data.data)}))},sure:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=e.form;Object(n["b"])(a).then((function(t){if(e.loading=!1,200!=t.status_code)return e.$notify({title:"提示",message:"修改失败",type:"error"}),!1;e.$notify({title:"提示",message:"修改成功",type:"success"}),e.handleClose(),e.$emit("success")}))}}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={user_no:null,name:null,level:null,status:null,email:null,company_name:null,total_remain_sms:null,channel_key:null,task_rebate:null},this.$refs.form.clearValidate()}}},b=h,_=(a("e9c2"),Object(c["a"])(b,f,p,!1,null,"658967d8",null)),v=_.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-user-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"新增用户",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.company_name,callback:function(t){e.$set(e.form,"company_name",t)},expression:"form.company_name"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)},w=[],k={name:"add-user-dialog",data:function(){return{dialogVisible:!1,loading:!1,val:{},form:{name:null,phone:null,password:null,company_name:null},rules:{name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],phone:[{required:!0,message:"请输入公司编号",trigger:"blur"}],password:[{required:!0,message:"请输入白名单",trigger:"blur"}],company_name:[{required:!0,message:"请输入公司名称",trigger:"blur"}]}}},mounted:function(){},methods:{show:function(){this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=e.form;Object(n["a"])(a).then((function(t){if(e.loading=!1,200!=t.status_code)return e.$notify({title:"提示",message:"新增失败",type:"error"}),!1;e.$notify({title:"提示",message:"新增成功",type:"success"}),e.handleClose(),e.$emit("success")})).catch((function(t){e.loading=!1}))}}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={name:null,phone:null,password:null,company_name:null},this.$refs.form.clearValidate()}}},$=k,x=(a("8681"),Object(c["a"])($,y,w,!1,null,"1a8f0faa",null)),C=x.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recharge-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"充值",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户编号",prop:"user_no"}},[a("el-input",{model:{value:e.form.user_no,callback:function(t){e.$set(e.form,"user_no",t)},expression:"form.user_no"}})],1),a("el-form-item",{attrs:{label:"充值数量",prop:"recharge_num"}},[a("el-input",{model:{value:e.form.recharge_num,callback:function(t){e.$set(e.form,"recharge_num",t)},expression:"form.recharge_num"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)},z=[],q=a("cd05"),j={name:"recharge-dialog",data:function(){return{dialogVisible:!1,loading:!1,val:{},form:{name:null,phone:null,password:null,company_name:null},rules:{user_no:[{required:!0,message:"请输入用户编号",trigger:"blur"}],recharge_num:[{required:!0,message:"请输入充值数量",trigger:"blur"}]}}},mounted:function(){},methods:{show:function(e){this.form.user_no=e.user_no,this.dialogVisible=!0},sure:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=e.form;Object(q["c"])(a).then((function(t){if(e.loading=!1,200!=t.status_code)return e.$notify({title:"提示",message:"修改失败",type:"error"}),!1;e.$notify({title:"提示",message:"修改成功",type:"success"}),e.handleClose(),e.$emit("success")})).catch((function(t){e.loading=!1}))}}))},handleClose:function(){this.dialogVisible=!1,this.reset()},reset:function(){this.loading=!1,this.form={user_no:null,recharge_num:null,remark:null},this.$refs.form.clearValidate()}}},O=j,L=(a("23fa"),Object(c["a"])(O,V,z,!1,null,"10580edc",null)),S=L.exports,D={name:"user-index",components:{passwordDialog:d,infoDialog:v,addUserDialog:C,rechargeDialog:S},data:function(){return{list:[],disabled:!0,multipleSelection:[],pages:{page:1,per_page:10,total:null}}},mounted:function(){this.userList()},methods:{userList:function(){var e=this,t={page:this.pages.page,per_page:this.pages.per_page};Object(n["h"])(t).then((function(t){console.log(t),200==t.status_code&&(e.list=t.data.data,e.pages.total=t.data.total)}))},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e),1==e.length?this.disabled=!1:this.disabled=!0},handleSizeChange:function(e){this.pages.per_page=e,this.userList()},handleCurrentChange:function(e){this.pages.page=e,this.userList()},changePassword:function(e){this.$refs.passwordDialog.show(e)},changeUser:function(e){this.$refs.infoDialog.show(e)},addUser:function(){this.$refs.addUserDialog.show()},recharge:function(e){this.$refs.rechargeDialog.show(e)},consumeList:function(){this.$router.push({path:"/finance/consume",query:{user_no:this.multipleSelection[0].user_no}})},rechargeList:function(){this.$router.push({path:"/finance/record",query:{user_no:this.multipleSelection[0].user_no}})},success:function(){this.userList()}}},U=D,E=(a("7c46"),Object(c["a"])(U,s,l,!1,null,"c58ee7ca",null));t["default"]=E.exports},e9c2:function(e,t,a){"use strict";a("666a")},f7c0:function(e,t,a){}}]);